"use strict";var f=Object.create;var p=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var c=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var b=(e,t)=>{for(var r in t)p(e,r,{get:t[r],enumerable:!0})},m=(e,t,r,l)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of S(t))!h.call(e,a)&&a!==r&&p(e,a,{get:()=>t[a],enumerable:!(l=P(t,a))||l.enumerable});return e};var C=(e,t,r)=>(r=e!=null?f(c(e)):{},m(t||!e||!e.__esModule?p(r,"default",{value:e,enumerable:!0}):r,e)),v=e=>m(p({},"__esModule",{value:!0}),e);var O={};b(O,{API:()=>M,Component:()=>w,plugin:()=>g});module.exports=v(O);var o=C(require("react")),i=require("antd"),n=require("flipper-plugin");function d(){return{cells:[" "," "," "," "," "," "," "," "," "],turn:Math.random()<.5?"O":"X",winner:" "}}var T=(e,t)=>r=>{r.cells[e]=t,r.turn=t==="X"?"O":"X",r.winner=k(r.cells)};function k(e){if(e[0]===e[4]&&e[0]===e[8]||e[2]===e[4]&&e[2]===e[6])return e[4];for(let t=0;t<3;t++){if(e[t]===e[3+t]&&e[t]===e[6+t])return e[t];if(e[t*3]===e[t*3+1]&&e[t*3]===e[t*3+2])return e[t*3]}return" "}var g=e=>{let t=(0,n.createState)(d()),r=()=>{e.send("SetState",t.get())},l=(s,u)=>{t.get().turn===s&&t.get().cells[u]===" "&&(t.update(T(u,s)),r())},a=()=>{t.set(d()),r()};return e.onConnect(()=>{e.onMessage("XMove",({move:s})=>{l("X",s)}),e.onMessage("GetState",()=>{r()}),r()}),{makeMove:l,reset:a,state:t}},M=e=>({makeMove:e.makeMove,reset:e.reset,state:e.state}),y="O",w=()=>{let e=(0,n.usePlugin)(g),{winner:t,turn:r,cells:l}=(0,n.useValue)(e.state);return o.default.createElement(n.Layout.Container,null,o.default.createElement(i.Space,{direction:"vertical",align:"center"},o.default.createElement(i.Alert,{message:o.default.createElement(o.default.Fragment,null,"This plugin demonstrates how to create pure JavaScript Flipper plugins for React Native. Find out how to create a similar plugin at"," ",o.default.createElement("a",{href:"https://fbflipper.com/docs/tutorial/intro",target:"blank"},"fbflipper.com"),"."),type:"info"}),o.default.createElement(i.Typography.Title,null,"Flipper Tic-Tac-Toe"),o.default.createElement(i.Typography.Text,null,t!==" "?`Winner! ${t}`:r==="O"?"Your turn":"Mobile players turn.."),o.default.createElement(X,null,l.map((a,s)=>o.default.createElement(x,{key:s,disabled:a!==" "||r!=y||t!==" ",onClick:()=>e.makeMove(y,s)},a))),o.default.createElement(i.Button,{onClick:()=>e.reset()},"Start new game")))},X=(0,n.styled)("div")({display:"grid",gridTemplateColumns:"repeat(3, 80px)",gridTemplateRows:"repeat(3, 80px)",justifyContent:"center",gap:10}),x=(0,n.styled)("button")({padding:20,width:"100%",height:"100%",minWidth:80,fontSize:24,flex:0,borderRadius:4,backgroundColor:n.theme.backgroundDefault,color:"white",":disabled":{backgroundColor:n.theme.disabledColor}});
